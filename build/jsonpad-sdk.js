!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).JSONPad={})}(this,(function(t){"use strict";class e{constructor(t){Object.assign(this,{...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt),lastActiveAt:t.lastActiveAt?new Date(t.lastActiveAt):null})}}class s{constructor(t){Object.assign(this,{...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt),user:new e(t.user)})}}class n{constructor(t){Object.assign(this,{...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})}}class a{constructor(t){Object.assign(this,{...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt),user:new e(t.user)})}}class i{constructor(t){Object.assign(this,{...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})}}function r(t,...e){return Object.fromEntries(Object.entries(t).filter((([t])=>!e.includes(t))))}const c="x-api-token";async function o(t,e,s,n,a){const i=n?new URLSearchParams({...Object.fromEntries(Object.entries(n).map((([t,e])=>[t,e.toString()])))}):"",r=await fetch(`https://api.jsonpad.io${s}?${i}`,{method:e,headers:{[c]:t,"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0});if(!r.ok)throw new Error(await r.text());return await r.json()}t.Event=s,t.Index=i,t.Item=n,t.List=a,t.User=e,t.default=class{constructor(t){this.token=t}async createList(t){return new a(await o(this.token,"POST","/lists",void 0,t))}async fetchLists(t){return(await o(this.token,"GET","/lists",t)).data.map((t=>new a(t)))}async fetchList(t){return new a(await o(this.token,"GET",`/lists/${t}`))}async searchList(t,e,s){return(await o(this.token,"GET",`/lists/${t}/search`,{query:e,...s})).map((t=>"item"in t?{relevance:t.relevance,item:new n(t.item)}:t))}async fetchListStats(t,e){return await o(this.token,"GET",`/lists/${t}/stats`,e)}async fetchListEvents(t,e){return(await o(this.token,"GET",`/lists/${t}/events`,e)).data.map((t=>new s(t)))}async fetchListEvent(t,e){return new s(await o(this.token,"GET",`/lists/${t}/events/${e}`))}async updateList(t,e){return new a(await o(this.token,"PATCH",`/lists/${t}`,void 0,e))}async deleteList(t){await o(this.token,"DELETE",`/lists/${t}`)}async createItem(t,e,s){return new n(await o(this.token,"POST",`/lists/${t}/items`,s,e))}async fetchItems(t,e){return(await o(this.token,"GET",`/lists/${t}/items`,e)).data.map((t=>new n(t)))}async fetchItemsData(t,e){const s=e.pointer?`/${e.pointer}`:"";return(await o(this.token,"GET",`/lists/${t}/items/data${s}`,r(e,"pointer"))).data}async fetchItem(t,e,s){return new n(await o(this.token,"GET",`/lists/${t}/items/${e}`,s))}async fetchItemData(t,e,s){const n=s.pointer?`/${s.pointer}`:"";return await o(this.token,"GET",`/lists/${t}/items/${e}/data${n}`,r(s,"pointer"))}async fetchItemStats(t,e,s){return await o(this.token,"GET",`/lists/${t}/items/${e}/stats`,s)}async fetchItemEvents(t,e,n){return(await o(this.token,"GET",`/lists/${t}/items/${e}/events`,n)).data.map((t=>new s(t)))}async fetchItemEvent(t,e,n){return new s(await o(this.token,"GET",`/lists/${t}/items/${e}/events/${n}`))}async updateItem(t,e,s){return new n(await o(this.token,"PUT",`/lists/${t}/items/${e}`,void 0,s))}async updateItemData(t,e,s,a){const i=a.pointer?`/${a.pointer}`:"";return new n(await o(this.token,"POST",`/lists/${t}/items/${e}/data${i}`,void 0,s))}async replaceItemData(t,e,s,a){const i=a.pointer?`/${a.pointer}`:"";return new n(await o(this.token,"PUT",`/lists/${t}/items/${e}/data${i}`,void 0,s))}async patchItemData(t,e,s,a){const i=a.pointer?`/${a.pointer}`:"";return new n(await o(this.token,"PATCH",`/lists/${t}/items/${e}/data${i}`,void 0,s))}async deleteItem(t,e){await o(this.token,"DELETE",`/lists/${t}/items/${e}`)}async deleteItemData(t,e,s){const a=s.pointer?`/${s.pointer}`:"";return new n(await o(this.token,"DELETE",`/lists/${t}/items/${e}/data${a}`))}async createIndex(t,e){return new i(await o(this.token,"POST",`/lists/${t}/indexes`,void 0,e))}async fetchIndexes(t,e){return(await o(this.token,"GET",`/lists/${t}/indexes`,e)).data.map((t=>new i(t)))}async fetchIndex(t,e){return new i(await o(this.token,"GET",`/lists/${t}/indexes/${e}`))}async fetchIndexStats(t,e,s){return await o(this.token,"GET",`/lists/${t}/indexes/${e}/stats`,s)}async fetchIndexEvents(t,e,n){return(await o(this.token,"GET",`/lists/${t}/indexes/${e}/events`,n)).data.map((t=>new s(t)))}async fetchIndexEvent(t,e,n){return new s(await o(this.token,"GET",`/lists/${t}/indexes/${e}/events/${n}`))}async updateIndex(t,e,s){return new i(await o(this.token,"PATCH",`/lists/${t}/indexes/${e}`,void 0,s))}async deleteIndex(t,e){await o(this.token,"DELETE",`/lists/${t}/indexes/${e}`)}},Object.defineProperty(t,"__esModule",{value:!0})}));
